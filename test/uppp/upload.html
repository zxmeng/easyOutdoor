<!-- <!DOCTYPE html>
<html lang="en">


<body>

<form enctype="multipart/form-data">
    <input name="file" type="file" />
    <input type="button" value="Upload" />
</form>
<progress></progress>

<script>
$(':file').change(function(){
    var file = this.files[0];
    var name = file.name;
    var size = file.size;
    var type = file.type;
    //Your validation
});

$(':button').click(function(){
    var formData = new FormData($('form')[0]);
    $.ajax({
        url: 'upload.php',  //Server script to process data
        type: 'POST',
        xhr: function() {  // Custom XMLHttpRequest
            var myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // Check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // For handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        beforeSend: beforeSendHandler,
        success: completeHandler,
        error: errorHandler,
        // Form data
        data: formData,
        //Options to tell jQuery not to process data or worry about content-type.
        cache: false,
        contentType: false,
        processData: false
    });
});

function progressHandlingFunction(e){
    if(e.lengthComputable){
        $('progress').attr({value:e.loaded,max:e.total});
    }
}


</script>


</body>
</html> -->

<!-- <!DOCTYPE html>

<html>

<head>

    <title>Html5 Ajax 上传文件</title>

    <script type="text/javascript">



        function UpladFile() {



            var fileObj = document.getElementById("file").files[0]; // 获取文件对象

            var FileController = "upload.php";                    // 接收上传文件的后台地址 

           

            // FormData 对象

            var form = new FormData();

            form.append("author", "hooyes");                        // 可以增加表单数据

            form.append("file", fileObj);                           // 文件对象



            // XMLHttpRequest 对象

            var xhr = new XMLHttpRequest();

            xhr.open("post", FileController, true);

            xhr.onload = function () {

                alert("Done!");

            };

            xhr.send(form);



        }

</script>

</head>

<body>

<input type="file" id="file" name="myfile" />

<input type="button" onclick="UpladFile()" value="Upload" />

</body>

</html>


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <script src="./ajaxupload.js"></script>
 </head>
 
 <body>
    <img src="./images/pic01.jpg" id="imgpic" width="320px" height="240px" />
    <div id='div_id'>上传</div>
    <script type="text/javascript">
        //您可以使用这些方法来配置AJAX的上传
        var upload = new AjaxUpload('#div_id',{action: 'upload.php'});
        //例如当用户选择了一些东西，设置一些参数
        upload.setData({'example_key': 'value'});
        //或者您可以在事件函数中直接使用这些方法
        new AjaxUpload('div_id', {
            action: 'upload.php',
             
            onComplete: function (file, response){
                if(response != ""){
                    var obj = document.getElementById("imgpic");
                    obj.src = "./images/" + response;
                }
            }
        });
     
    </script>
 </body>
</html>


<script>
function http(date,url,callback) {
    function createXHttpRequest() {
      if (window.ActiveXObject) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      else if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
      }
      else {
        return;
      }
    }
 
    function starRequest(date) {
      createXHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4) {
          if (xmlhttp.status == 200) {
            callback();
            
          }
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.send(date);
    }
    starRequest(date);
  }
var date = new FormData($("from[name='form1']")[0]);
var url = "http://www.bt2magnet.com/upload.php";
var callback = function(){};
http(date,url,callback);

</script>

<script>
var formobj =  document.getElementById("form");
var formdata = new FormData(formobj);
</script> -->